<div class = "container">
  <div class ="row mt-5">
    <div class="col-auto">
      <%= image_tag "avatar.svg", class: "avatar-large" %>
    </div>
    <div class="col">
      <h4><%= current_user.first_name %> <%= current_user.last_name %></h4>
      <p><%= current_user.email %></p>
    </div>
    <hr class="rounded mt-3 mb-3">
  </div>

  <nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">My dinosaurs (<%= current_user.dinosaurs.count%>)</button>
    <button class="nav-link" id="nav-bookings-tab" data-bs-toggle="tab" data-bs-target="#nav-bookings" type="button" role="tab" aria-controls="nav-bookings" aria-selected="false">Booking requests</button>
    <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">Contact</button>
  </div>
</nav>
<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
  <div class ="row mt-3 justify-content-between">
    <div class = "container">
      <% current_user.dinosaurs.each do |dinosaur| %>
        <div class ="row">
          <div class="col-auto">
            <%= cl_image_tag dinosaur.photo.key, crop: :fill, class: :dashboard_picture %>
          </div>
          <div class ="col-auto">
            <h4><%=dinosaur.name%>, the <%=dinosaur.species.capitalize%> ‚≠ê <%= dinosaur.review%>/5</h4>
            <ul class="list-group list-group-horizontal my-3">
              <li class="list-group-item">
              <% if dinosaur.element == "air"  %>
                  <span><i class="fa-solid fa-wind"></i> <%= dinosaur.element.capitalize %></span>
                <% elsif dinosaur.element == "earth"%>
                  <span><i class="fa-solid fa-mountain-sun"></i> <%= dinosaur.element.capitalize %></span>
                <% else %>
                  <span><i class="fa-solid fa-water"></i> <%= dinosaur.element.capitalize %></span>
                <% end %>
              </li>
              <li class="list-group-item">
                <span><i class="fa-solid fa-clock"></i> <%= dinosaur.age %> M years</span>
              </li>
              <li class="list-group-item">
                <span><i class="fa-solid fa-weight-scale"></i> <%= dinosaur.weight %> kg</span>
              </li>
              <li class="list-group-item">
                <span><i class="fa-solid fa-ruler-vertical"></i> <%= dinosaur.height %> meters</span>
              </li>
              <li class="list-group-item">
                <span><i class="fa-solid fa-heart-circle-exclamation"></i> <%= dinosaur.character.capitalize %></span>
              </li>
            </ul>
            <div class="btn-group mt-2" role="group" aria-label="Basic example">
            <%= link_to "Profile", dinosaur_path(dinosaur), type:"button", class:"btn btn-flat"%>
            <%= link_to "Edit", edit_dinosaur_path(dinosaur), type:"button", class:"btn btn-flat"%>
            <%=link_to "Delete", dinosaur_path(dinosaur), method: :delete, data: {confirm: 'Are you certain you want to delete this dinosaur?'}, type:"button", class:"btn btn-flat"%>
            </div>
          </div>
          <hr class="text-divider my-3">
        </div>
      <%end%>
    </div>
  </div>
  <div class="tab-pane fade" id="nav-bookings" role="tabpanel" aria-labelledby="nav-bookings-tab" tabindex="0">
    <h1>blabla</h1>
      <h6> <strong>Pending bookings</strong> <span class="badge bg-secondary">New</span></h6>
      <% current_user.dinosaurs.each do |dinosaur| %>
        <% dinosaur.bookings.each do |booking|%>
        bla
          <p> Booking request from <%= booking.start_date%> to <%= booking.end_date %></p>
        <%end%>
    <%end%>
  </div>
  <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab" tabindex="0">...</div>
  <div class="tab-pane fade" id="nav-disabled" role="tabpanel" aria-labelledby="nav-disabled-tab" tabindex="0">...</div>
</div>
  </div>

<h6> <strong>Pending Bookings</strong> <span class="badge bg-secondary">New</span></h6>
      <% current_user.dinosaurs.each do |dinosaur| %>
        <% dinosaur.bookings.each do |booking|%>
        <% if (booking.status == "pending") %>
        <div class="alert alert-secondary" role="alert">
          <p> Booking request from <%= booking.start_date%> to <%= booking.end_date %> for <strong><%= dinosaur.name%> the <%= dinosaur.species %></strong> [<%=booking.status%>]</p>
            <%= link_to "Accept", acceptbooking_path(booking), class: "btn btn-danger" %>
          <%= link_to "Deny", denybooking_path(booking), class: "btn btn-success" %>
          </div>
        <%end%>
        <%end%>
    <%end%>


</div>
